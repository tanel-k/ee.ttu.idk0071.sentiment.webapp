{"version":3,"sources":["app.js","environment.js","main.js","lib/utils.js","resources/index.js","containers/lookup-detail/lookup-detail.js","containers/lookup-form/lookup-form.js","containers/main-page/main-page.js","gateways/data/data-api.js","resources/value-converters/filter-by.js","resources/value-converters/order-by.js","containers/general/not-found/not-found.js","containers/lookup-form/dialogs/lookup-submitted.js","resources/elements/graphs/pie-chart.js","resources/elements/graphs/utils/colors.js"],"names":["App","defaultBindingMode","twoWay","api","isSearching","configureRouter","config","router","title","map","route","name","moduleId","nav","mapUnknownRoutes","searchForLookup","lookupIdSearch","trim","fetchLookup","then","response","navigateToRoute","lookupId","id","catch","err","debug","testing","gatewayURL","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","plugin","feature","developmentLogging","start","setRoot","isEmpty","val","globalResources","STATE_COMPLETE","STATE_ERROR","LookupDetail","completeDomainLookups","incompleteDomainLookups","registerDomainLookup","bind","activate","params","registerLookup","lookupData","domainLookups","forEach","domainLookup","domainLookupState","currStateName","isCompleteState","registerCompleteDomainLookup","push","flattenDomainLookup","eventSource","getDomainLookupEventSource","addEventListener","event","data","close","find","d","filter","fetchDomainLookup","extendCompleteDomainLookup","cpltDomainLookup","length","stateName","chartDataItems","positiveCount","label","color","neutralCount","negativeCount","totalCount","Object","assign","domainName","domain","isError","isSuccess","LookupForm","dialogService","entityName","domainIds","created","fetchDomains","domains","domainOptions","value","code","performLookup","blockPage","postLookup","releasePage","openResultDialog","lookupResult","model","open","viewModel","$","blockUI","message","unblockUI","MainPage","DataAPI","httpClient","useStandardConfiguration","withBaseUrl","isRequesting","fetch","json","method","body","JSON","stringify","headers","domainLookupId","EventSource","FilterByValueConverter","toView","array","properties","toLowerCase","some","item","property","includes","OrderByValueConverter","direction","slice","directionFactor","sort","item1","item2","value1","value2","NotFound","LookupSubmitted","controller","openDetailPage","navigate","cancel","PieChart","Element","element","attached","mapDataItemsToChartData","items","type","canvas","querySelector","chart","dataItems","labels","backgroundColor","hoverBackgroundColor","datasets","colorMap"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { inject, bindable, bindingMode } from 'aurelia-framework';\r\nimport { DataAPI } from './gateways/data/data-api';\r\n\r\n@inject(DataAPI)\r\nexport class App {\r\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) lookupIdSearch = '';\r\n  isSearching = false;\r\n\r\n  constructor(api) {\r\n    this.api = api;\r\n  }\r\n\r\n  configureRouter(config, router) {\r\n    this.router = router;\r\n    config.title = 'Sentimental.ly';\r\n\r\n    config.map([\r\n      {\r\n        route: '',\r\n        name: 'main',\r\n        moduleId: 'containers/main-page/main-page'\r\n      },\r\n      {\r\n        route: 'new-lookup',\r\n        name: 'lookup-form',\r\n        title: 'New lookup',\r\n        nav: true,\r\n        moduleId: 'containers/lookup-form/lookup-form'\r\n      },\r\n      {\r\n        route: 'lookups/:lookupId',\r\n        name: 'lookup-detail',\r\n        moduleId: 'containers/lookup-detail/lookup-detail'\r\n      },\r\n      {\r\n        route: 'not-found',\r\n        name: 'not-found',\r\n        moduleId: 'containers/general/not-found/not-found'\r\n      }\r\n    ]);\r\n\r\n    config.mapUnknownRoutes('containers/general/not-found/not-found');\r\n  }\r\n\r\n  searchForLookup() {\r\n    if (this.lookupIdSearch && this.lookupIdSearch.trim()) {\r\n      this.isSearching = true;\r\n      this.api.fetchLookup(this.lookupIdSearch.trim())\r\n        .then((response) => {\r\n          this.router.navigateToRoute('lookup-detail', { lookupId: response.id });\r\n          this.lookupIdSearch = '';\r\n          this.isSearching = false;\r\n        })\r\n        .catch((err) => {\r\n          this.isSearching = false;\r\n        });\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true,\r\n  gatewayURL: 'http://localhost:8080'\r\n};\r\n","import environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .plugin('aurelia-dialog')\r\n    .feature('resources');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","export function isEmpty(val) {\r\n  return !val || !val.trim();\r\n}\r\n","export function configure(config) {\r\n  config.globalResources([\r\n    './value-converters/filter-by',\r\n    './value-converters/order-by',\r\n    './elements/graphs/pie-chart'\r\n  ]);\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\n\r\nconst STATE_COMPLETE = 'Complete';\r\nconst STATE_ERROR = 'Error';\r\n\r\n@inject(DataAPI, Router)\r\nexport class LookupDetail {\r\n  constructor(api, router) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.completeDomainLookups = [];\r\n    this.incompleteDomainLookups = [];\r\n    this.registerDomainLookup = this.registerDomainLookup.bind(this);\r\n  }\r\n\r\n  activate(params) {\r\n    const { lookupId } = params;\r\n    this.api.fetchLookup(lookupId)\r\n      .then(lookupData => {\r\n        this.registerLookup(lookupData);\r\n      })\r\n      .catch((err) => {\r\n        this.router.navigateToRoute('not-found');\r\n      });\r\n  }\r\n\r\n  get hasIncompleteLookups() {\r\n    return this.incompleteDomainLookups.length > 0;\r\n  }\r\n\r\n  get hasCompleteLookups() {\r\n    return this.completeDomainLookups.length > 0;\r\n  }\r\n\r\n  registerLookup(lookupData) {\r\n    this.lookupData = lookupData;\r\n    lookupData.domainLookups.forEach(this.registerDomainLookup);\r\n  }\r\n\r\n  registerDomainLookup(domainLookup) {\r\n    const { id, domainLookupState } = domainLookup;\r\n    let currStateName = domainLookupState.name;\r\n\r\n    if (isCompleteState(currStateName)) {\r\n      this.registerCompleteDomainLookup(id);\r\n      return;\r\n    }\r\n\r\n    this.incompleteDomainLookups.push(flattenDomainLookup((domainLookup)));\r\n\r\n    const eventSource = this.api.getDomainLookupEventSource(id);\r\n    eventSource.addEventListener('state', (event) => {\r\n      currStateName = event.data;\r\n      if (isCompleteState(currStateName)) {\r\n        eventSource.close();\r\n        this.registerCompleteDomainLookup(id);\r\n      } else {\r\n        this.incompleteDomainLookups.find(d => d.id === id)\r\n          .currStateName = currStateName;\r\n      }\r\n    });\r\n  }\r\n\r\n  registerCompleteDomainLookup(id) {\r\n    this.incompleteDomainLookups = this.incompleteDomainLookups\r\n      .filter(d => d.id !== id);\r\n    this.api.fetchDomainLookup(id)\r\n      .then(cpltDomainLookup => {\r\n        this.completeDomainLookups.push(\r\n          extendCompleteDomainLookup(flattenDomainLookup(cpltDomainLookup))\r\n        );\r\n      });\r\n  }\r\n}\r\n\r\nconst isCompleteState = (stateName) => (\r\n  stateName === STATE_COMPLETE || stateName === STATE_ERROR\r\n);\r\n\r\nconst extendCompleteDomainLookup = (domainLookup) => {\r\n  const chartDataItems = [\r\n    {\r\n      data: domainLookup.positiveCount,\r\n      label: 'Positive',\r\n      color: 'green'\r\n    },\r\n    {\r\n      data: domainLookup.neutralCount,\r\n      label: 'Neutral',\r\n      color: 'yellow'\r\n    },\r\n    {\r\n      data: domainLookup.negativeCount,\r\n      label: 'Negative',\r\n      color: 'red'\r\n    }\r\n  ];\r\n  const totalCount = domainLookup.neutralCount\r\n    + domainLookup.negativeCount\r\n    + domainLookup.positiveCount;\r\n\r\n  return Object.assign(domainLookup, { chartDataItems, totalCount });\r\n};\r\n\r\nconst flattenDomainLookup = (domainLookup) => {\r\n  const currStateName = domainLookup.domainLookupState.name;\r\n  const domainName = domainLookup.domain.name;\r\n  const isError = currStateName === STATE_ERROR;\r\n  const isSuccess = currStateName === STATE_COMPLETE;\r\n\r\n  return Object.assign({}, domainLookup, {\r\n    isError,\r\n    isSuccess,\r\n    domainName,\r\n    currStateName\r\n  });\r\n};\r\n\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogService } from 'aurelia-dialog';\r\n\r\nimport 'jquery';\r\nimport blockUI from 'blockUI';\r\n\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\nimport { isEmpty } from '../../lib/utils';\r\nimport LookupSubmitted from './dialogs/lookup-submitted';\r\n\r\n\r\n@inject(DataAPI, Router, DialogService)\r\nexport class LookupForm {\r\n  constructor(api, router, dialogService) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.dialogService = dialogService;\r\n\r\n    this.entityName = '';\r\n    this.domainIds = [];\r\n  }\r\n\r\n  created() {\r\n    this.api.fetchDomains()\r\n      .then((domains) => {\r\n        this.domainOptions = domains.map(d => ({\r\n          label: d.name,\r\n          value: d.code\r\n        }));\r\n      })\r\n      .catch((err) => {\r\n       // cannot recover\r\n      });\r\n  }\r\n\r\n  get canLookup() {\r\n    return !isEmpty(this.entityName)\r\n      && this.domainIds.length > 0;\r\n  }\r\n\r\n  performLookup() {\r\n    blockPage();\r\n    const { entityName, domainIds } = this;\r\n\r\n    this.api.postLookup({ entityName, domainIds })\r\n      .then(lookupResult => {\r\n        releasePage();\r\n        this.domainIds = [];\r\n        this.entityName = '';\r\n        this.openResultDialog({ lookupResult, entityName });\r\n      })\r\n      .catch(err => {\r\n\r\n      });\r\n  }\r\n\r\n  openResultDialog(model) {\r\n    this.dialogService.open({\r\n      viewModel: LookupSubmitted,\r\n      model: model\r\n    });\r\n  }\r\n}\r\n\r\nconst blockPage = () => {\r\n  $.blockUI({ message: null });\r\n};\r\n\r\nconst releasePage = () => {\r\n  $.unblockUI();\r\n};\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\n\r\n@inject(Router)\r\nexport default class MainPage {\r\n  constructor(router) {\r\n    this.router = router;\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport environment from '../../environment';\r\n\r\n@inject(HttpClient)\r\nexport class DataAPI {\r\n\r\n  constructor(httpClient) {\r\n    this.httpClient = httpClient.configure(config => config\r\n          .useStandardConfiguration()\r\n          .withBaseUrl(environment.gatewayURL)\r\n        );\r\n  }\r\n\r\n  isRequesting() {\r\n    return this.httpClient.isRequesting;\r\n  }\r\n\r\n  fetchLookup(lookupId) {\r\n    return this.httpClient\r\n      .fetch(`/lookups/${lookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  postLookup(lookupData) {\r\n    return this.httpClient\r\n    .fetch('/lookups', {\r\n      method: 'POST',\r\n      body: JSON.stringify(lookupData),\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }})\r\n    .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomains() {\r\n    return this.httpClient\r\n      .fetch('/domains')\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomainLookup(domainLookupId) {\r\n    return this.httpClient\r\n      .fetch(`/domain-lookups/${domainLookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  getDomainLookupEventSource(domainLookupId) {\r\n    return new EventSource(\r\n      `${environment.gatewayURL}/domain-lookups/${domainLookupId}/updates`);\r\n  }\r\n}\r\n","export class FilterByValueConverter {\r\n  toView(array, value, ...properties) {\r\n    value = (value || '').trim().toLowerCase();\r\n    if (!value) {\r\n      return array;\r\n    }\r\n    return array.filter(item =>\r\n      properties.some(property =>\r\n        (item[property] || '').toLowerCase().includes(value)));\r\n  }\r\n}\r\n","export class OrderByValueConverter {\r\n  toView(array, property, direction = 'asc') {\r\n    array = array.slice(0);\r\n    const directionFactor = direction === 'desc' ? -1 : 1;\r\n    array.sort((item1, item2) => {\r\n      const value1 = item1[property];\r\n      const value2 = item2[property];\r\n      if (value1 > value2) {\r\n        return directionFactor;\r\n      } else if (value1 < value2) {\r\n        return -directionFactor;\r\n      }\r\n      return 0;\r\n    });\r\n    return array;\r\n  }\r\n}\r\n","export default class NotFound {}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController, Router)\r\nexport default class LookupSubmitted {\r\n  lookupResult = {};\r\n\r\n  constructor(controller, router) {\r\n    this.controller = controller;\r\n    this.router = router;\r\n  }\r\n\r\n  activate({ lookupResult, entityName }) {\r\n    this.lookupResult = lookupResult;\r\n    this.entityName = entityName;\r\n  }\r\n\r\n  openDetailPage() {\r\n    this.router.navigate(`lookups/${this.lookupResult.lookupId}`);\r\n  }\r\n\r\n  close() {\r\n    this.controller.cancel();\r\n  }\r\n}\r\n","import { inject, bindable } from 'aurelia-framework';\r\n\r\nimport Chart from 'chart.js';\r\n\r\nimport { colorMap } from './utils/colors';\r\n\r\n@inject(Element)\r\nexport class PieChart {\r\n  @bindable width = '250';\r\n  @bindable height = '250';\r\n  @bindable items = [];\r\n\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n\r\n  attached() {\r\n    const data = this.mapDataItemsToChartData(this.items);\r\n    const type = 'pie';\r\n\r\n    this.canvas = this.element.querySelector('.chart-canvas');\r\n    this.chart = new Chart(this.canvas, { type, data });\r\n  }\r\n\r\n  mapDataItemsToChartData(dataItems) {\r\n    const labels = dataItems.map(item => item.label);\r\n    const data = dataItems.map(item => item.data);\r\n    const backgroundColor = dataItems.map(item => colorMap[item.color].backgroundColor);\r\n    const hoverBackgroundColor = dataItems.map(item => colorMap[item.color].hoverBackgroundColor);\r\n\r\n    return {\r\n      labels,\r\n      datasets: [{\r\n        data,\r\n        backgroundColor,\r\n        hoverBackgroundColor\r\n      }]\r\n    };\r\n  }\r\n}\r\n","export const colorMap = {\r\n  'red': {\r\n    hoverBackgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n    backgroundColor: 'rgba(255,99,132,1)'\r\n  },\r\n  'blue': {\r\n    hoverBackgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n    backgroundColor: 'rgba(54, 162, 235, 1)'\r\n  },\r\n  'yellow': {\r\n    hoverBackgroundColor: 'rgba(255, 206, 86, 0.2)',\r\n    backgroundColor: 'rgba(255, 206, 86, 1)'\r\n  },\r\n  'green': {\r\n    hoverBackgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n    backgroundColor: 'rgba(75, 192, 192, 1)'\r\n  }\r\n};\r\n"],"sourceRoot":"../src"}