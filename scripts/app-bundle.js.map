{"version":3,"sources":["app-utils.js","app.js","environment.js","main.js","lib/utils.js","resources/index.js","containers/dialogs/error-dialog.js","containers/lookup-detail/lookup-detail.js","containers/main-page/main-page.js","containers/lookup-form/lookup-form.js","gateways/data/data-api.js","resources/value-converters/filter-by.js","resources/value-converters/order-by.js","containers/general/not-found/not-found.js","containers/lookup-form/dialogs/lookup-submitted.js","resources/elements/graphs/pie-chart.js","resources/elements/graphs/utils/colors.js"],"names":["blockPage","$","blockUI","message","releasePage","unblockUI","App","defaultBindingMode","twoWay","api","isSearching","configureRouter","config","router","title","map","route","name","moduleId","nav","mapUnknownRoutes","searchForLookup","lookupIdSearch","trim","fetchLookup","then","response","navigateToRoute","lookupId","id","catch","err","debug","testing","gatewayURL","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","plugin","feature","developmentLogging","start","setRoot","isEmpty","val","globalResources","ErrorDialog","controller","activate","close","cancel","STATE_COMPLETE","STATE_ERROR","LookupDetail","completeDomainLookups","incompleteDomainLookups","registerDomainLookup","bind","params","registerLookup","lookupData","domainLookups","forEach","domainLookup","domainLookupState","currStateName","isCompleteState","registerCompleteDomainLookup","push","flattenDomainLookup","eventSource","getDomainLookupEventSource","addEventListener","event","data","find","d","filter","fetchDomainLookup","extendCompleteDomainLookup","cpltDomainLookup","length","stateName","chartDataItems","positiveCount","label","color","neutralCount","negativeCount","totalCount","Object","assign","domainName","domain","isError","isSuccess","MainPage","MSG_NETWORK_ERR","MSG_SUBMISSION_ERR","LookupForm","dialogService","entityName","domainIds","attached","fetchDomains","domains","domainOptions","value","code","console","log","openErrorDialog","performLookup","postLookup","openResultDialog","lookupResult","model","open","viewModel","DataAPI","httpClient","useStandardConfiguration","withBaseUrl","isRequesting","fetch","json","method","body","JSON","stringify","headers","domainLookupId","EventSource","FilterByValueConverter","toView","array","properties","toLowerCase","some","item","property","includes","OrderByValueConverter","direction","slice","directionFactor","sort","item1","item2","value1","value2","NotFound","LookupSubmitted","openDetailPage","navigate","PieChart","Element","element","mapDataItemsToChartData","items","type","canvas","querySelector","chart","dataItems","labels","backgroundColor","hoverBackgroundColor","datasets","colorMap"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import 'jquery';\r\nimport blockUI from 'blockUI';\r\n\r\nexport const blockPage = () => {\r\n  $.blockUI({ message: null });\r\n};\r\n\r\nexport const releasePage = () => {\r\n  $.unblockUI();\r\n};\r\n","import { inject, bindable, bindingMode } from 'aurelia-framework';\r\nimport { DataAPI } from './gateways/data/data-api';\r\n\r\n@inject(DataAPI)\r\nexport class App {\r\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) lookupIdSearch = '';\r\n  isSearching = false;\r\n\r\n  constructor(api) {\r\n    this.api = api;\r\n  }\r\n\r\n  configureRouter(config, router) {\r\n    this.router = router;\r\n    config.title = 'Sentimental.ly';\r\n\r\n    config.map([\r\n      {\r\n        route: '',\r\n        name: 'main',\r\n        moduleId: 'containers/main-page/main-page'\r\n      },\r\n      {\r\n        route: 'new-lookup',\r\n        name: 'lookup-form',\r\n        title: 'New lookup',\r\n        nav: true,\r\n        moduleId: 'containers/lookup-form/lookup-form'\r\n      },\r\n      {\r\n        route: 'lookups/:lookupId',\r\n        name: 'lookup-detail',\r\n        moduleId: 'containers/lookup-detail/lookup-detail'\r\n      },\r\n      {\r\n        route: 'not-found',\r\n        name: 'not-found',\r\n        moduleId: 'containers/general/not-found/not-found'\r\n      }\r\n    ]);\r\n\r\n    config.mapUnknownRoutes('containers/general/not-found/not-found');\r\n  }\r\n\r\n  searchForLookup() {\r\n    if (this.lookupIdSearch && this.lookupIdSearch.trim()) {\r\n      this.isSearching = true;\r\n      this.api.fetchLookup(this.lookupIdSearch.trim())\r\n        .then((response) => {\r\n          this.router.navigateToRoute('lookup-detail', { lookupId: response.id });\r\n          this.lookupIdSearch = '';\r\n          this.isSearching = false;\r\n        })\r\n        .catch((err) => {\r\n          this.isSearching = false;\r\n        });\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true,\r\n  gatewayURL: 'http://localhost:8080'\r\n};\r\n","import environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .plugin('aurelia-dialog')\r\n    .feature('resources');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","export function isEmpty(val) {\r\n  return !val || !val.trim();\r\n}\r\n","export function configure(config) {\r\n  config.globalResources([\r\n    './value-converters/filter-by',\r\n    './value-converters/order-by',\r\n    './elements/graphs/pie-chart'\r\n  ]);\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport default class ErrorDialog {\r\n  constructor(controller) {\r\n    this.controller = controller;\r\n  }\r\n\r\n  activate({ message }) {\r\n    this.message = message;\r\n  }\r\n\r\n  close() {\r\n    this.controller.cancel();\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\n\r\nconst STATE_COMPLETE = 'Complete';\r\nconst STATE_ERROR = 'Error';\r\n\r\n@inject(DataAPI, Router)\r\nexport class LookupDetail {\r\n  constructor(api, router) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.completeDomainLookups = [];\r\n    this.incompleteDomainLookups = [];\r\n    this.registerDomainLookup = this.registerDomainLookup.bind(this);\r\n  }\r\n\r\n  activate(params) {\r\n    const { lookupId } = params;\r\n    this.api.fetchLookup(lookupId)\r\n      .then(lookupData => {\r\n        this.registerLookup(lookupData);\r\n      })\r\n      .catch((err) => {\r\n        this.router.navigateToRoute('not-found');\r\n      });\r\n  }\r\n\r\n  get hasIncompleteLookups() {\r\n    return this.incompleteDomainLookups.length > 0;\r\n  }\r\n\r\n  get hasCompleteLookups() {\r\n    return this.completeDomainLookups.length > 0;\r\n  }\r\n\r\n  registerLookup(lookupData) {\r\n    this.lookupData = lookupData;\r\n    lookupData.domainLookups.forEach(this.registerDomainLookup);\r\n  }\r\n\r\n  registerDomainLookup(domainLookup) {\r\n    const { id, domainLookupState } = domainLookup;\r\n    let currStateName = domainLookupState.name;\r\n\r\n    if (isCompleteState(currStateName)) {\r\n      this.registerCompleteDomainLookup(id);\r\n      return;\r\n    }\r\n\r\n    this.incompleteDomainLookups.push(flattenDomainLookup((domainLookup)));\r\n\r\n    const eventSource = this.api.getDomainLookupEventSource(id);\r\n    eventSource.addEventListener('state', (event) => {\r\n      currStateName = event.data;\r\n      if (isCompleteState(currStateName)) {\r\n        eventSource.close();\r\n        this.registerCompleteDomainLookup(id);\r\n      } else {\r\n        this.incompleteDomainLookups.find(d => d.id === id)\r\n          .currStateName = currStateName;\r\n      }\r\n    });\r\n  }\r\n\r\n  registerCompleteDomainLookup(id) {\r\n    this.incompleteDomainLookups = this.incompleteDomainLookups\r\n      .filter(d => d.id !== id);\r\n    this.api.fetchDomainLookup(id)\r\n      .then(cpltDomainLookup => {\r\n        this.completeDomainLookups.push(\r\n          extendCompleteDomainLookup(flattenDomainLookup(cpltDomainLookup))\r\n        );\r\n      });\r\n  }\r\n}\r\n\r\nconst isCompleteState = (stateName) => (\r\n  stateName === STATE_COMPLETE || stateName === STATE_ERROR\r\n);\r\n\r\nconst extendCompleteDomainLookup = (domainLookup) => {\r\n  const chartDataItems = [\r\n    {\r\n      data: domainLookup.positiveCount,\r\n      label: 'Positive',\r\n      color: 'green'\r\n    },\r\n    {\r\n      data: domainLookup.neutralCount,\r\n      label: 'Neutral',\r\n      color: 'yellow'\r\n    },\r\n    {\r\n      data: domainLookup.negativeCount,\r\n      label: 'Negative',\r\n      color: 'red'\r\n    }\r\n  ];\r\n  const totalCount = domainLookup.neutralCount\r\n    + domainLookup.negativeCount\r\n    + domainLookup.positiveCount;\r\n\r\n  return Object.assign(domainLookup, { chartDataItems, totalCount });\r\n};\r\n\r\nconst flattenDomainLookup = (domainLookup) => {\r\n  const currStateName = domainLookup.domainLookupState.name;\r\n  const domainName = domainLookup.domain.name;\r\n  const isError = currStateName === STATE_ERROR;\r\n  const isSuccess = currStateName === STATE_COMPLETE;\r\n\r\n  return Object.assign({}, domainLookup, {\r\n    isError,\r\n    isSuccess,\r\n    domainName,\r\n    currStateName\r\n  });\r\n};\r\n\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\n\r\n@inject(Router)\r\nexport default class MainPage {\r\n  constructor(router) {\r\n    this.router = router;\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogService } from 'aurelia-dialog';\r\n\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\nimport { isEmpty } from '../../lib/utils';\r\nimport { blockPage, releasePage } from '../../app-utils';\r\nimport LookupSubmitted from './dialogs/lookup-submitted';\r\nimport ErrorDialog from '../dialogs/error-dialog';\r\n\r\nconst MSG_NETWORK_ERR = 'An error occurred while preparing the form. Check your network connection.';\r\nconst MSG_SUBMISSION_ERR = 'An unexpected error occurred while submitting your lookup.';\r\n\r\n@inject(DataAPI, Router, DialogService)\r\nexport class LookupForm {\r\n  constructor(api, router, dialogService) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.dialogService = dialogService;\r\n\r\n    this.entityName = '';\r\n    this.domainIds = [];\r\n  }\r\n\r\n  attached() {\r\n    blockPage();\r\n    this.api.fetchDomains()\r\n      .then((domains) => {\r\n        releasePage();\r\n        this.domainOptions = domains.map(d => ({\r\n          label: d.name,\r\n          value: d.code\r\n        }));\r\n      })\r\n      .catch((err) => {\r\n        releasePage();\r\n        console.log(err);\r\n        this.openErrorDialog(MSG_NETWORK_ERR);\r\n      });\r\n  }\r\n\r\n  get canLookup() {\r\n    return !isEmpty(this.entityName)\r\n      && this.domainIds.length > 0;\r\n  }\r\n\r\n  performLookup() {\r\n    blockPage();\r\n    const { entityName, domainIds } = this;\r\n\r\n    this.api.postLookup({ entityName, domainIds })\r\n      .then(lookupResult => {\r\n        releasePage();\r\n        this.domainIds = [];\r\n        this.entityName = '';\r\n        this.openResultDialog({ lookupResult, entityName });\r\n      })\r\n      .catch(err => {\r\n        releasePage();\r\n        this.openErrorDialog(MSG_SUBMISSION_ERR);\r\n      });\r\n  }\r\n\r\n  openResultDialog(model) {\r\n    this.dialogService.open({\r\n      viewModel: LookupSubmitted,\r\n      model: model\r\n    });\r\n  }\r\n\r\n  openErrorDialog(message) {\r\n    this.dialogService.open({\r\n      viewModel: ErrorDialog,\r\n      model: { message }\r\n    });\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport environment from '../../environment';\r\n\r\n@inject(HttpClient)\r\nexport class DataAPI {\r\n\r\n  constructor(httpClient) {\r\n    this.httpClient = httpClient.configure(config => config\r\n          .useStandardConfiguration()\r\n          .withBaseUrl(environment.gatewayURL)\r\n        );\r\n  }\r\n\r\n  isRequesting() {\r\n    return this.httpClient.isRequesting;\r\n  }\r\n\r\n  fetchLookup(lookupId) {\r\n    return this.httpClient\r\n      .fetch(`/lookups/${lookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  postLookup(lookupData) {\r\n    return this.httpClient\r\n    .fetch('/lookups', {\r\n      method: 'POST',\r\n      body: JSON.stringify(lookupData),\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }})\r\n    .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomains() {\r\n    return this.httpClient\r\n      .fetch('/domains')\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomainLookup(domainLookupId) {\r\n    return this.httpClient\r\n      .fetch(`/domain-lookups/${domainLookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  getDomainLookupEventSource(domainLookupId) {\r\n    return new EventSource(\r\n      `${environment.gatewayURL}/domain-lookups/${domainLookupId}/updates`);\r\n  }\r\n}\r\n","export class FilterByValueConverter {\r\n  toView(array, value, ...properties) {\r\n    value = (value || '').trim().toLowerCase();\r\n    if (!value) {\r\n      return array;\r\n    }\r\n    return array.filter(item =>\r\n      properties.some(property =>\r\n        (item[property] || '').toLowerCase().includes(value)));\r\n  }\r\n}\r\n","export class OrderByValueConverter {\r\n  toView(array, property, direction = 'asc') {\r\n    array = array.slice(0);\r\n    const directionFactor = direction === 'desc' ? -1 : 1;\r\n    array.sort((item1, item2) => {\r\n      const value1 = item1[property];\r\n      const value2 = item2[property];\r\n      if (value1 > value2) {\r\n        return directionFactor;\r\n      } else if (value1 < value2) {\r\n        return -directionFactor;\r\n      }\r\n      return 0;\r\n    });\r\n    return array;\r\n  }\r\n}\r\n","export default class NotFound {}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController, Router)\r\nexport default class LookupSubmitted {\r\n  lookupResult = {};\r\n\r\n  constructor(controller, router) {\r\n    this.controller = controller;\r\n    this.router = router;\r\n  }\r\n\r\n  activate({ lookupResult, entityName }) {\r\n    this.lookupResult = lookupResult;\r\n    this.entityName = entityName;\r\n  }\r\n\r\n  openDetailPage() {\r\n    this.router.navigate(`lookups/${this.lookupResult.lookupId}`);\r\n  }\r\n\r\n  close() {\r\n    this.controller.cancel();\r\n  }\r\n}\r\n","import { inject, bindable } from 'aurelia-framework';\r\n\r\nimport Chart from 'chart.js';\r\n\r\nimport { colorMap } from './utils/colors';\r\n\r\n@inject(Element)\r\nexport class PieChart {\r\n  @bindable width = '250';\r\n  @bindable height = '250';\r\n  @bindable items = [];\r\n\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n\r\n  attached() {\r\n    const data = this.mapDataItemsToChartData(this.items);\r\n    const type = 'pie';\r\n\r\n    this.canvas = this.element.querySelector('.chart-canvas');\r\n    this.chart = new Chart(this.canvas, { type, data });\r\n  }\r\n\r\n  mapDataItemsToChartData(dataItems) {\r\n    const labels = dataItems.map(item => item.label);\r\n    const data = dataItems.map(item => item.data);\r\n    const backgroundColor = dataItems.map(item => colorMap[item.color].backgroundColor);\r\n    const hoverBackgroundColor = dataItems.map(item => colorMap[item.color].hoverBackgroundColor);\r\n\r\n    return {\r\n      labels,\r\n      datasets: [{\r\n        data,\r\n        backgroundColor,\r\n        hoverBackgroundColor\r\n      }]\r\n    };\r\n  }\r\n}\r\n","export const colorMap = {\r\n  'red': {\r\n    hoverBackgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n    backgroundColor: 'rgba(255,99,132,1)'\r\n  },\r\n  'blue': {\r\n    hoverBackgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n    backgroundColor: 'rgba(54, 162, 235, 1)'\r\n  },\r\n  'yellow': {\r\n    hoverBackgroundColor: 'rgba(255, 206, 86, 0.2)',\r\n    backgroundColor: 'rgba(255, 206, 86, 1)'\r\n  },\r\n  'green': {\r\n    hoverBackgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n    backgroundColor: 'rgba(75, 192, 192, 1)'\r\n  }\r\n};\r\n"],"sourceRoot":"../src"}