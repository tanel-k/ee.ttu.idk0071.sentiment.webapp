{"version":3,"sources":["app-utils.js","app.js","environment.js","main.js","lib/utils.js","resources/index.js","containers/dialogs/error-dialog.js","containers/lookup-detail/lookup-detail.js","containers/lookup-form/lookup-form.js","containers/main-page/main-page.js","gateways/data/data-api.js","resources/value-converters/filter-by.js","resources/value-converters/order-by.js","containers/general/not-found/not-found.js","containers/lookup-form/dialogs/lookup-submitted.js","resources/elements/form-elements/drag-drop-select.js","resources/elements/graphs/pie-chart.js","resources/elements/graphs/utils/colors.js"],"names":["blockPage","$","blockUI","message","releasePage","unblockUI","App","defaultBindingMode","twoWay","api","isSearching","configureRouter","config","router","title","map","route","name","moduleId","nav","mapUnknownRoutes","searchForLookup","lookupIdSearch","trim","fetchLookup","then","response","navigateToRoute","lookupId","id","catch","err","debug","testing","gatewayURL","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","plugin","feature","developmentLogging","start","setRoot","isEmpty","val","globalResources","ErrorDialog","controller","activate","close","cancel","STATE_COMPLETE","STATE_ERROR","LookupDetail","dialogService","completeDomainLookups","incompleteDomainLookups","registerDomainLookup","bind","params","isLoading","registerLookup","lookupData","domainLookups","forEach","domainLookup","domainLookupState","currStateName","isCompleteState","registerCompleteDomainLookup","push","flattenDomainLookup","eventSource","getDomainLookupEventSource","onerror","error","eventSourceErrorOccurred","openErrorDialog","addEventListener","event","data","find","d","filter","fetchDomainLookup","unshift","extendCompleteDomainLookup","cpltDomainLookup","open","viewModel","model","length","stateName","chartDataItems","positiveCount","label","color","neutralCount","negativeCount","totalCount","Object","assign","domainName","domain","isError","isSuccess","MSG_NETWORK_ERR","MSG_SUBMISSION_ERR","LookupForm","entityName","domainIds","attached","domainOptions","value","performLookup","postLookup","openResultDialog","lookupResult","MainPage","DataAPI","httpClient","useStandardConfiguration","withBaseUrl","isRequesting","fetch","json","method","body","JSON","stringify","headers","fetchDomains","domainLookupId","EventSource","FilterByValueConverter","toView","array","properties","toLowerCase","some","item","property","includes","OrderByValueConverter","direction","slice","directionFactor","sort","item1","item2","value1","value2","NotFound","LookupSubmitted","openDetailPage","navigate","DragDropSelect","Element","element","initializeDragDropAreas","attachMutationListeners","console","warn","document","querySelectorAll","createElement","window","opera","targets","call","e","setAttribute","items","selections","owner","droptarget","addSelection","parentNode","removeSelection","selectionIndex","findIndex","selection","splice","clearSelections","hasModifier","ctrlKey","metaKey","shiftKey","addDropeffects","target","getAttribute","removeAttribute","clearDropeffects","getContainer","nodeType","preventDefault","dataTransfer","setData","related","className","replace","appendChild","PieChart","mapDataItemsToChartData","type","canvas","querySelector","chart","dataItems","labels","backgroundColor","hoverBackgroundColor","datasets","colorMap"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import 'jquery';\r\nimport blockUI from 'blockUI';\r\n\r\nexport const blockPage = () => {\r\n  $.blockUI({ message: null });\r\n};\r\n\r\nexport const releasePage = () => {\r\n  $.unblockUI();\r\n};\r\n","import { inject, bindable, bindingMode } from 'aurelia-framework';\r\nimport { DataAPI } from './gateways/data/data-api';\r\n\r\n@inject(DataAPI)\r\nexport class App {\r\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) lookupIdSearch = '';\r\n  isSearching = false;\r\n\r\n  constructor(api) {\r\n    this.api = api;\r\n  }\r\n\r\n  configureRouter(config, router) {\r\n    this.router = router;\r\n    config.title = 'Sentimental.ly';\r\n\r\n    config.map([\r\n      {\r\n        route: '',\r\n        name: 'main',\r\n        moduleId: 'containers/main-page/main-page'\r\n      },\r\n      {\r\n        route: 'new-lookup',\r\n        name: 'lookup-form',\r\n        title: 'New lookup',\r\n        nav: true,\r\n        moduleId: 'containers/lookup-form/lookup-form'\r\n      },\r\n      {\r\n        route: 'lookups/:lookupId',\r\n        name: 'lookup-detail',\r\n        moduleId: 'containers/lookup-detail/lookup-detail'\r\n      },\r\n      {\r\n        route: 'not-found',\r\n        name: 'not-found',\r\n        moduleId: 'containers/general/not-found/not-found'\r\n      }\r\n    ]);\r\n\r\n    config.mapUnknownRoutes('containers/general/not-found/not-found');\r\n  }\r\n\r\n  searchForLookup() {\r\n    if (this.lookupIdSearch && this.lookupIdSearch.trim()) {\r\n      this.isSearching = true;\r\n      this.api.fetchLookup(this.lookupIdSearch.trim())\r\n        .then((response) => {\r\n          this.router.navigateToRoute('lookup-detail', { lookupId: response.id });\r\n          this.lookupIdSearch = '';\r\n          this.isSearching = false;\r\n        })\r\n        .catch((err) => {\r\n          this.isSearching = false;\r\n        });\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true,\r\n  gatewayURL: 'http://localhost:8080'\r\n};\r\n","import environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .plugin('aurelia-dialog')\r\n    .feature('resources');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","export function isEmpty(val) {\r\n  return !val || !val.trim();\r\n}\r\n","export function configure(config) {\r\n  config.globalResources([\r\n    './value-converters/filter-by',\r\n    './value-converters/order-by',\r\n    './elements/graphs/pie-chart',\r\n    './elements/form-elements/drag-drop-select'\r\n  ]);\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport default class ErrorDialog {\r\n  constructor(controller) {\r\n    this.controller = controller;\r\n  }\r\n\r\n  activate({ message }) {\r\n    this.message = message;\r\n  }\r\n\r\n  close() {\r\n    this.controller.cancel();\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\nimport { DialogService } from 'aurelia-dialog';\r\n\r\nimport { blockPage, releasePage } from '../../app-utils';\r\nimport ErrorDialog from '../dialogs/error-dialog';\r\n\r\nconst STATE_COMPLETE = 'Complete';\r\nconst STATE_ERROR = 'Error';\r\n\r\n@inject(DataAPI, Router, DialogService)\r\nexport class LookupDetail {\r\n  constructor(api, router, dialogService) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.dialogService = dialogService;\r\n\r\n    this.completeDomainLookups = [];\r\n    this.incompleteDomainLookups = [];\r\n    this.registerDomainLookup = this.registerDomainLookup.bind(this);\r\n  }\r\n\r\n  activate(params) {\r\n    const { lookupId } = params;\r\n    this.isLoading = true;\r\n    blockPage();\r\n    this.api.fetchLookup(lookupId)\r\n      .then(lookupData => {\r\n        releasePage();\r\n        this.isLoading = false;\r\n        this.registerLookup(lookupData);\r\n      })\r\n      .catch((err) => {\r\n        releasePage();\r\n        this.isLoading = false;\r\n        this.router.navigateToRoute('not-found');\r\n      });\r\n  }\r\n\r\n  get hasIncompleteLookups() {\r\n    return this.incompleteDomainLookups.length > 0;\r\n  }\r\n\r\n  get hasCompleteLookups() {\r\n    return this.completeDomainLookups.length > 0;\r\n  }\r\n\r\n  registerLookup(lookupData) {\r\n    this.lookupData = lookupData;\r\n    lookupData.domainLookups.forEach(this.registerDomainLookup);\r\n  }\r\n\r\n  registerDomainLookup(domainLookup) {\r\n    const { id, domainLookupState } = domainLookup;\r\n    let currStateName = domainLookupState.name;\r\n\r\n    if (isCompleteState(currStateName)) {\r\n      this.registerCompleteDomainLookup(id);\r\n      return;\r\n    }\r\n\r\n    this.incompleteDomainLookups.push(flattenDomainLookup((domainLookup)));\r\n\r\n    const eventSource = this.api.getDomainLookupEventSource(id);\r\n    eventSource.onerror = (error) => {\r\n      // prevent error spam\r\n      if (!this.eventSourceErrorOccurred) {\r\n        this.eventSourceErrorOccurred = true;\r\n        this.openErrorDialog('A network error has occurred. You might want to refresh the page.');\r\n      }\r\n    };\r\n\r\n    eventSource.addEventListener('state', (event) => {\r\n      currStateName = event.data;\r\n      if (isCompleteState(currStateName)) {\r\n        eventSource.close();\r\n        this.registerCompleteDomainLookup(id);\r\n      } else {\r\n        this.incompleteDomainLookups.find(d => d.id === id)\r\n          .currStateName = currStateName;\r\n      }\r\n    });\r\n  }\r\n\r\n  registerCompleteDomainLookup(id) {\r\n    this.incompleteDomainLookups = this.incompleteDomainLookups\r\n      .filter(d => d.id !== id);\r\n    this.api.fetchDomainLookup(id)\r\n      .then(cpltDomainLookup => {\r\n        this.completeDomainLookups.unshift(\r\n          extendCompleteDomainLookup(flattenDomainLookup(cpltDomainLookup))\r\n        );\r\n      });\r\n  }\r\n\r\n  openErrorDialog(message) {\r\n    this.dialogService.open({\r\n      viewModel: ErrorDialog,\r\n      model: { message }\r\n    });\r\n  }\r\n}\r\n\r\nconst isCompleteState = (stateName) => (\r\n  stateName === STATE_COMPLETE || stateName === STATE_ERROR\r\n);\r\n\r\nconst extendCompleteDomainLookup = (domainLookup) => {\r\n  const chartDataItems = [\r\n    {\r\n      data: domainLookup.positiveCount,\r\n      label: 'Positive',\r\n      color: 'green'\r\n    },\r\n    {\r\n      data: domainLookup.neutralCount,\r\n      label: 'Neutral',\r\n      color: 'yellow'\r\n    },\r\n    {\r\n      data: domainLookup.negativeCount,\r\n      label: 'Negative',\r\n      color: 'red'\r\n    }\r\n  ];\r\n  const totalCount = domainLookup.neutralCount\r\n    + domainLookup.negativeCount\r\n    + domainLookup.positiveCount;\r\n\r\n  return Object.assign(domainLookup, { chartDataItems, totalCount });\r\n};\r\n\r\nconst flattenDomainLookup = (domainLookup) => {\r\n  const currStateName = domainLookup.domainLookupState.name;\r\n  const domainName = domainLookup.domain.name;\r\n  const isError = currStateName === STATE_ERROR;\r\n  const isSuccess = currStateName === STATE_COMPLETE;\r\n\r\n  return Object.assign({}, domainLookup, {\r\n    isError,\r\n    isSuccess,\r\n    domainName,\r\n    currStateName\r\n  });\r\n};\r\n\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogService } from 'aurelia-dialog';\r\n\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\nimport { isEmpty } from '../../lib/utils';\r\nimport { blockPage, releasePage } from '../../app-utils';\r\nimport LookupSubmitted from './dialogs/lookup-submitted';\r\nimport ErrorDialog from '../dialogs/error-dialog';\r\n\r\nconst MSG_NETWORK_ERR = 'An error occurred while preparing the form. Check your network connection.';\r\nconst MSG_SUBMISSION_ERR = 'An unexpected error occurred while submitting your lookup.';\r\n\r\n@inject(DataAPI, Router, DialogService)\r\nexport class LookupForm {\r\n  constructor(api, router, dialogService) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.dialogService = dialogService;\r\n\r\n    this.entityName = '';\r\n    this.domainIds = [];\r\n  }\r\n\r\n  attached() {\r\n    this.domainOptions = [{label: 'test', value: 'test'}];\r\n    /*blockPage();\r\n    this.api.fetchDomains()\r\n      .then((domains) => {\r\n        releasePage();\r\n        this.domainOptions = domains.map(d => ({\r\n          label: d.name,\r\n          value: d.code\r\n        }));\r\n      })\r\n      .catch((err) => {\r\n        releasePage();\r\n        this.openErrorDialog(MSG_NETWORK_ERR);\r\n      });*/\r\n  }\r\n\r\n  get canLookup() {\r\n    return !isEmpty(this.entityName)\r\n      && this.domainIds.length > 0;\r\n  }\r\n\r\n  performLookup() {\r\n    blockPage();\r\n    const { entityName, domainIds } = this;\r\n\r\n    this.api.postLookup({ entityName, domainIds })\r\n      .then(lookupResult => {\r\n        releasePage();\r\n        this.domainIds = [];\r\n        this.entityName = '';\r\n        this.openResultDialog({ lookupResult, entityName });\r\n      })\r\n      .catch(err => {\r\n        releasePage();\r\n        this.openErrorDialog(MSG_SUBMISSION_ERR);\r\n      });\r\n  }\r\n\r\n  openResultDialog(model) {\r\n    this.dialogService.open({\r\n      viewModel: LookupSubmitted,\r\n      model: model\r\n    });\r\n  }\r\n\r\n  openErrorDialog(message) {\r\n    this.dialogService.open({\r\n      viewModel: ErrorDialog,\r\n      model: { message }\r\n    });\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\n\r\n@inject(Router)\r\nexport default class MainPage {\r\n  constructor(router) {\r\n    this.router = router;\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport environment from '../../environment';\r\n\r\n@inject(HttpClient)\r\nexport class DataAPI {\r\n\r\n  constructor(httpClient) {\r\n    this.httpClient = httpClient.configure(config => config\r\n          .useStandardConfiguration()\r\n          .withBaseUrl(environment.gatewayURL)\r\n        );\r\n  }\r\n\r\n  isRequesting() {\r\n    return this.httpClient.isRequesting;\r\n  }\r\n\r\n  fetchLookup(lookupId) {\r\n    return this.httpClient\r\n      .fetch(`/lookups/${lookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  postLookup(lookupData) {\r\n    return this.httpClient\r\n    .fetch('/lookups', {\r\n      method: 'POST',\r\n      body: JSON.stringify(lookupData),\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }})\r\n    .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomains() {\r\n    return this.httpClient\r\n      .fetch('/domains')\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomainLookup(domainLookupId) {\r\n    return this.httpClient\r\n      .fetch(`/domain-lookups/${domainLookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  getDomainLookupEventSource(domainLookupId) {\r\n    return new EventSource(\r\n      `${environment.gatewayURL}/domain-lookups/${domainLookupId}/updates`);\r\n  }\r\n}\r\n","export class FilterByValueConverter {\r\n  toView(array, value, ...properties) {\r\n    value = (value || '').trim().toLowerCase();\r\n    if (!value) {\r\n      return array;\r\n    }\r\n    return array.filter(item =>\r\n      properties.some(property =>\r\n        (item[property] || '').toLowerCase().includes(value)));\r\n  }\r\n}\r\n","export class OrderByValueConverter {\r\n  toView(array, property, direction = 'asc') {\r\n    array = array.slice(0);\r\n    const directionFactor = direction === 'desc' ? -1 : 1;\r\n    array.sort((item1, item2) => {\r\n      const value1 = item1[property];\r\n      const value2 = item2[property];\r\n      if (value1 > value2) {\r\n        return directionFactor;\r\n      } else if (value1 < value2) {\r\n        return -directionFactor;\r\n      }\r\n      return 0;\r\n    });\r\n    return array;\r\n  }\r\n}\r\n","export default class NotFound {}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController, Router)\r\nexport default class LookupSubmitted {\r\n  lookupResult = {};\r\n\r\n  constructor(controller, router) {\r\n    this.controller = controller;\r\n    this.router = router;\r\n  }\r\n\r\n  activate({ lookupResult, entityName }) {\r\n    this.lookupResult = lookupResult;\r\n    this.entityName = entityName;\r\n  }\r\n\r\n  openDetailPage() {\r\n    this.router.navigate(`lookups/${this.lookupResult.lookupId}`);\r\n  }\r\n\r\n  close() {\r\n    this.controller.cancel();\r\n  }\r\n}\r\n","// courtesy of https://www.sitepoint.com/accessible-drag-drop/\r\n// adapted and converted to ES6\r\nimport { inject, bindable } from 'aurelia-framework';\r\n\r\n@inject(Element)\r\nexport class DragDropSelect {\r\n  @bindable options = [];\r\n\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n\r\n  attached() {\r\n    // called before render\r\n    this.initializeDragDropAreas();\r\n    this.attachMutationListeners();\r\n  }\r\n\r\n  attachMutationListeners() {\r\n    console.warn('not implemented yet');\r\n  }\r\n\r\n  initializeDragDropAreas() {\r\n    if (!document.querySelectorAll || !('draggable' in document.createElement('span')) || window.opera) {\r\n      return;\r\n    }\r\n\r\n    //get the collection of draggable targets and add their draggable attribute\r\n    const targets = [].slice.call(this.element.querySelectorAll('[data-draggable=\"target\"]'));\r\n    targets.forEach(e => e.setAttribute('aria-dropeffect', 'none'));\r\n\r\n    //get the collection of draggable items and add their draggable attributes\r\n    const items = [].slice.call(this.element.querySelectorAll('[data-draggable=\"item\"]'));\r\n\r\n    items.forEach(e => {\r\n      e.setAttribute('draggable', 'true');\r\n      e.setAttribute('aria-grabbed', 'false');\r\n      e.setAttribute('tabindex', '0');\r\n    });\r\n\r\n    //dictionary for storing current selection data\r\n    //comprising an array of the currently selected items\r\n    //a reference to the selected items' owning container\r\n    //and a reference to the current drop target container\r\n    const selections = {\r\n      items: [],\r\n      owner: null,\r\n      droptarget: null\r\n    };\r\n\r\n    //function for selecting an item\r\n    function addSelection(item) {\r\n      if (!selections.owner) {\r\n        //if the owner reference is still null, set it to this item's parent\r\n        //so that further selection is only allowed within the same container\r\n        selections.owner = item.parentNode;\r\n      } else if (selections.owner !== item.parentNode) {\r\n  \t    //or if that's already happened then compare it with this item's parent\r\n        //and if they're not the same container, return to prevent selection\r\n        return;\r\n      }\r\n      //set this item's grabbed state\r\n      item.setAttribute('aria-grabbed', 'true');\r\n      //add it to the items array\r\n      selections.items.push(item);\r\n    }\r\n\r\n    //function for unselecting an item\r\n    function removeSelection(item) {\r\n      //reset this item's grabbed state\r\n      item.setAttribute('aria-grabbed', 'false');\r\n\r\n      //then find and remove this item from the existing items array\r\n      const selectionIndex = selections.items.findIndex(selection => selection === item);\r\n      selections.items.splice(selectionIndex, 1);\r\n    }\r\n\r\n    //function for resetting all selections\r\n    function clearSelections() {\r\n      //if we have any selected items\r\n      if (selections.items.length) {\r\n        //reset the owner reference\r\n        selections.owner = null;\r\n\r\n        //reset the grabbed state on every selected item\r\n        selections.items.forEach(selection => selection.setAttribute('aria-grabbed', 'false'));\r\n\r\n        //then reset the items array\r\n        selections.items = [];\r\n      }\r\n    }\r\n\r\n    //shorctut function for testing whether a selection modifier is pressed\r\n    function hasModifier(e) {\r\n      return (e.ctrlKey || e.metaKey || e.shiftKey);\r\n    }\r\n\r\n    //function for applying dropeffect to the target containers\r\n    function addDropeffects() {\r\n      //apply aria-dropeffect and tabindex to all targets apart from the owner\r\n      targets\r\n        .filter(target => target !== selections.owner && target.getAttribute('aria-dropeffect') === 'none')\r\n        .forEach(target => {\r\n          target.setAttribute('aria-dropeffect', 'move');\r\n          target.setAttribute('tabindex', '0');\r\n        });\r\n\r\n      //remove aria-grabbed and tabindex from all items inside those containers\r\n      items\r\n        .filter(item => item.parentNode !== selections.owner && item.getAttribute('aria-grabbed'))\r\n        .forEach(item => {\r\n          item.removeAttribute('aria-grabbed');\r\n          item.removeAttribute('tabindex');\r\n        });\r\n    }\r\n\r\n    //function for removing dropeffect from the target containers\r\n    function clearDropeffects() {\r\n      //if we have any selected items\r\n      if (selections.items.length) {\r\n        targets.filter(target => target.getAttribute('aria-dropeffect') !== 'none')\r\n          .forEach(target => {\r\n            //reset aria-dropeffect and remove tabindex from all targets\r\n            target.setAttribute('aria-dropeffect', 'none');\r\n            target.removeAttribute('tabindex');\r\n          });\r\n\r\n          //restore aria-grabbed and tabindex to all selectable items\r\n          //without changing the grabbed value of any existing selected items\r\n        items.filter(item => !item.getAttribute('aria-grabbed')).forEach(item => {\r\n          item.setAttribute('aria-grabbed', 'false');\r\n          item.setAttribute('tabindex', '0');\r\n        });\r\n        items.filter(item => item.getAttribute('aria-grabbed') === 'true').forEach(item => {\r\n          item.setAttribute('tabindex', '0');\r\n        });\r\n      }\r\n    }\r\n\r\n    //shortcut function for identifying an event element's target container\r\n    function getContainer(element) {\r\n      do {\r\n        if (element.nodeType === 1 && element.getAttribute('aria-dropeffect')) {\r\n          return element;\r\n        }\r\n        element = element.parentNode;\r\n      } while (element);\r\n\r\n      return null;\r\n    }\r\n\r\n    // events\r\n\r\n    //mousedown event to implement single selection\r\n    this.element.addEventListener('mousedown', (e) => {\r\n      //if the element is a draggable item\r\n      if (e.target.getAttribute('draggable')) {\r\n        //clear dropeffect from the target containers\r\n        clearDropeffects();\r\n\r\n        //if the multiple selection modifier is not pressed\r\n        //and the item's grabbed state is currently false\r\n        if (!hasModifier(e) && e.target.getAttribute('aria-grabbed') === 'false') {\r\n          //clear all existing selections\r\n          clearSelections();\r\n\r\n          //then add this new selection\r\n          addSelection(e.target);\r\n        }\r\n      } else if (!hasModifier(e)) {\r\n        //else [if the element is anything else]\r\n        //and the selection modifier is not pressed\r\n        //clear dropeffect from the target containers\r\n        clearDropeffects();\r\n\r\n        //clear all existing selections\r\n        clearSelections();\r\n      } else {\r\n        //else [if the element is anything else and the modifier is pressed]\r\n        //clear dropeffect from the target containers\r\n        clearDropeffects();\r\n      }\r\n    }, false);\r\n\r\n    //mouseup event to implement multiple selection\r\n    this.element.addEventListener('mouseup', (e) => {\r\n      //if the element is a draggable item\r\n      //and the multiple selection modifier is pressed\r\n      if (e.target.getAttribute('draggable') && hasModifier(e)) {\r\n        //if the item's grabbed state is currently true\r\n        if (e.target.getAttribute('aria-grabbed') === 'true') {\r\n          //unselect this item\r\n          removeSelection(e.target);\r\n\r\n          //if that was the only selected item\r\n          //then reset the owner container reference\r\n          if (!selections.items.length) {\r\n            selections.owner = null;\r\n          }\r\n        } else {\r\n          //else [if the item's grabbed state is false]\r\n          //add this additional selection\r\n          addSelection(e.target);\r\n        }\r\n      }\r\n    }, false);\r\n\r\n    //dragstart event to initiate mouse dragging\r\n    this.element.addEventListener('dragstart', (e) => {\r\n      //if the element's parent is not the owner, then block this event\r\n      if (selections.owner !== e.target.parentNode) {\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n\r\n      //[else] if the multiple selection modifier is pressed\r\n      //and the item's grabbed state is currently false\r\n      if (hasModifier(e) && e.target.getAttribute('aria-grabbed') === 'false') {\r\n        //add this additional selection\r\n        addSelection(e.target);\r\n      }\r\n\r\n      //we don't need the transfer data, but we have to define something\r\n      //otherwise the drop action won't work at all in firefox\r\n      //most browsers support the proper mime-type syntax, eg. \"text/plain\"\r\n      //but we have to use this incorrect syntax for the benefit of IE10+\r\n      e.dataTransfer.setData('text', '');\r\n\r\n      //apply dropeffect to the target containers\r\n      addDropeffects();\r\n    }, false);\r\n\r\n    //related variable is needed to maintain a reference to the\r\n    //dragleave's relatedTarget, since it doesn't have e.relatedTarget\r\n    let related = null;\r\n\r\n    //dragenter event to set that variable\r\n    this.element.addEventListener('dragenter', (e) => {\r\n      related = e.target;\r\n    }, false);\r\n\r\n    //dragleave event to maintain target highlighting using that variable\r\n    this.element.addEventListener('dragleave', (e) => {\r\n      //get a drop target reference from the relatedTarget\r\n      let droptarget = getContainer(related);\r\n\r\n      //if the target is the owner then it's not a valid drop target\r\n      if (droptarget === selections.owner) {\r\n        droptarget = null;\r\n      }\r\n\r\n      //if the drop target is different from the last stored reference\r\n      //(or we have one of those references but not the other one)\r\n      if (droptarget !== selections.droptarget) {\r\n        //if we have a saved reference, clear its existing dragover class\r\n        if (selections.droptarget) {\r\n          selections.droptarget.className =\r\n              selections.droptarget.className.replace(/ dragover/g, '');\r\n        }\r\n\r\n        //apply the dragover class to the new drop target reference\r\n        if (droptarget) {\r\n          droptarget.className += ' dragover';\r\n        }\r\n\r\n        //then save that reference for next time\r\n        selections.droptarget = droptarget;\r\n      }\r\n    }, false);\r\n\r\n    //dragover event to allow the drag by preventing its default\r\n    this.element.addEventListener('dragover', (e) => {\r\n      //if we have any selected items, allow them to be dragged\r\n      if (selections.items.length) {\r\n        e.preventDefault();\r\n      }\r\n    }, false);\r\n\r\n    //dragend event to implement items being validly dropped into targets,\r\n    //or invalidly dropped elsewhere, and to clean-up the interface either way\r\n    this.element.addEventListener('dragend', (e) => {\r\n      //if we have a valid drop target reference\r\n      //(which implies that we have some selected items)\r\n      if (selections.droptarget) {\r\n        //append the selected items to the end of the target container\r\n        selections.items.forEach(item => selections.droptarget.appendChild(item));\r\n\r\n        //prevent default to allow the action\r\n        e.preventDefault();\r\n      }\r\n\r\n      //if we have any selected items\r\n      if (selections.items.length) {\r\n        //clear dropeffect from the target containers\r\n        clearDropeffects();\r\n\r\n        //if we have a valid drop target reference\r\n        if (selections.droptarget) {\r\n          //reset the selections array\r\n          clearSelections();\r\n\r\n          //reset the target's dragover class\r\n          selections.droptarget.className =\r\n              selections.droptarget.className.replace(/ dragover/g, '');\r\n\r\n          //reset the target reference\r\n          selections.droptarget = null;\r\n        }\r\n      }\r\n    }, false);\r\n  }\r\n}\r\n","import { inject, bindable } from 'aurelia-framework';\r\n\r\nimport Chart from 'chart.js';\r\n\r\nimport { colorMap } from './utils/colors';\r\n\r\n@inject(Element)\r\nexport class PieChart {\r\n  @bindable width = '250';\r\n  @bindable height = '250';\r\n  @bindable items = [];\r\n\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n\r\n  attached() {\r\n    const data = this.mapDataItemsToChartData(this.items);\r\n    const type = 'pie';\r\n\r\n    this.canvas = this.element.querySelector('.chart-canvas');\r\n    this.chart = new Chart(this.canvas, { type, data });\r\n  }\r\n\r\n  mapDataItemsToChartData(dataItems) {\r\n    const labels = dataItems.map(item => item.label);\r\n    const data = dataItems.map(item => item.data);\r\n    const backgroundColor = dataItems.map(item => colorMap[item.color].backgroundColor);\r\n    const hoverBackgroundColor = dataItems.map(item => colorMap[item.color].hoverBackgroundColor);\r\n\r\n    return {\r\n      labels,\r\n      datasets: [{\r\n        data,\r\n        backgroundColor,\r\n        hoverBackgroundColor\r\n      }]\r\n    };\r\n  }\r\n}\r\n","export const colorMap = {\r\n  'red': {\r\n    hoverBackgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n    backgroundColor: 'rgba(255,99,132,1)'\r\n  },\r\n  'blue': {\r\n    hoverBackgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n    backgroundColor: 'rgba(54, 162, 235, 1)'\r\n  },\r\n  'yellow': {\r\n    hoverBackgroundColor: 'rgba(255, 206, 86, 0.2)',\r\n    backgroundColor: 'rgba(255, 206, 86, 1)'\r\n  },\r\n  'green': {\r\n    hoverBackgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n    backgroundColor: 'rgba(75, 192, 192, 1)'\r\n  }\r\n};\r\n"],"sourceRoot":"../src"}