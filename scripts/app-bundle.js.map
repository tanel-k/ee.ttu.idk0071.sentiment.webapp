{"version":3,"sources":["app-utils.js","app.js","environment.js","main.js","lib/utils.js","resources/index.js","containers/dialogs/error-dialog.js","containers/lookup-detail/lookup-detail.js","containers/main-page/main-page.js","containers/lookup-form/lookup-form.js","gateways/data/data-api.js","resources/value-converters/filter-by.js","resources/value-converters/order-by.js","containers/general/not-found/not-found.js","containers/lookup-form/dialogs/lookup-submitted.js","resources/elements/graphs/pie-chart.js","resources/elements/graphs/utils/colors.js"],"names":["blockPage","$","blockUI","message","releasePage","unblockUI","App","defaultBindingMode","twoWay","api","isSearching","configureRouter","config","router","title","map","route","name","moduleId","nav","mapUnknownRoutes","searchForLookup","lookupIdSearch","trim","fetchLookup","then","response","navigateToRoute","lookupId","id","catch","err","debug","testing","gatewayURL","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","plugin","feature","developmentLogging","start","setRoot","isEmpty","val","globalResources","ErrorDialog","controller","activate","close","cancel","STATE_COMPLETE","STATE_ERROR","LookupDetail","dialogService","completeDomainLookups","incompleteDomainLookups","registerDomainLookup","bind","params","isLoading","registerLookup","lookupData","domainLookups","forEach","domainLookup","domainLookupState","currStateName","isCompleteState","registerCompleteDomainLookup","push","flattenDomainLookup","eventSource","getDomainLookupEventSource","onerror","error","eventSourceErrorOccurred","openErrorDialog","addEventListener","event","data","find","d","filter","fetchDomainLookup","extendCompleteDomainLookup","cpltDomainLookup","open","viewModel","model","length","stateName","chartDataItems","positiveCount","label","color","neutralCount","negativeCount","totalCount","Object","assign","domainName","domain","isError","isSuccess","MainPage","MSG_NETWORK_ERR","MSG_SUBMISSION_ERR","LookupForm","entityName","domainIds","attached","fetchDomains","domains","domainOptions","value","code","performLookup","postLookup","openResultDialog","lookupResult","DataAPI","httpClient","useStandardConfiguration","withBaseUrl","isRequesting","fetch","json","method","body","JSON","stringify","headers","domainLookupId","EventSource","FilterByValueConverter","toView","array","properties","toLowerCase","some","item","property","includes","OrderByValueConverter","direction","slice","directionFactor","sort","item1","item2","value1","value2","NotFound","LookupSubmitted","openDetailPage","navigate","PieChart","Element","element","mapDataItemsToChartData","items","type","canvas","querySelector","chart","dataItems","labels","backgroundColor","hoverBackgroundColor","datasets","colorMap"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import 'jquery';\r\nimport blockUI from 'blockUI';\r\n\r\nexport const blockPage = () => {\r\n  $.blockUI({ message: null });\r\n};\r\n\r\nexport const releasePage = () => {\r\n  $.unblockUI();\r\n};\r\n","import { inject, bindable, bindingMode } from 'aurelia-framework';\r\nimport { DataAPI } from './gateways/data/data-api';\r\n\r\n@inject(DataAPI)\r\nexport class App {\r\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) lookupIdSearch = '';\r\n  isSearching = false;\r\n\r\n  constructor(api) {\r\n    this.api = api;\r\n  }\r\n\r\n  configureRouter(config, router) {\r\n    this.router = router;\r\n    config.title = 'Sentimental.ly';\r\n\r\n    config.map([\r\n      {\r\n        route: '',\r\n        name: 'main',\r\n        moduleId: 'containers/main-page/main-page'\r\n      },\r\n      {\r\n        route: 'new-lookup',\r\n        name: 'lookup-form',\r\n        title: 'New lookup',\r\n        nav: true,\r\n        moduleId: 'containers/lookup-form/lookup-form'\r\n      },\r\n      {\r\n        route: 'lookups/:lookupId',\r\n        name: 'lookup-detail',\r\n        moduleId: 'containers/lookup-detail/lookup-detail'\r\n      },\r\n      {\r\n        route: 'not-found',\r\n        name: 'not-found',\r\n        moduleId: 'containers/general/not-found/not-found'\r\n      }\r\n    ]);\r\n\r\n    config.mapUnknownRoutes('containers/general/not-found/not-found');\r\n  }\r\n\r\n  searchForLookup() {\r\n    if (this.lookupIdSearch && this.lookupIdSearch.trim()) {\r\n      this.isSearching = true;\r\n      this.api.fetchLookup(this.lookupIdSearch.trim())\r\n        .then((response) => {\r\n          this.router.navigateToRoute('lookup-detail', { lookupId: response.id });\r\n          this.lookupIdSearch = '';\r\n          this.isSearching = false;\r\n        })\r\n        .catch((err) => {\r\n          this.isSearching = false;\r\n        });\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true,\r\n  gatewayURL: 'http://localhost:8080'\r\n};\r\n","import environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .plugin('aurelia-dialog')\r\n    .feature('resources');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","export function isEmpty(val) {\r\n  return !val || !val.trim();\r\n}\r\n","export function configure(config) {\r\n  config.globalResources([\r\n    './value-converters/filter-by',\r\n    './value-converters/order-by',\r\n    './elements/graphs/pie-chart'\r\n  ]);\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport default class ErrorDialog {\r\n  constructor(controller) {\r\n    this.controller = controller;\r\n  }\r\n\r\n  activate({ message }) {\r\n    this.message = message;\r\n  }\r\n\r\n  close() {\r\n    this.controller.cancel();\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\nimport { DialogService } from 'aurelia-dialog';\r\n\r\nimport { blockPage, releasePage } from '../../app-utils';\r\nimport ErrorDialog from '../dialogs/error-dialog';\r\n\r\nconst STATE_COMPLETE = 'Complete';\r\nconst STATE_ERROR = 'Error';\r\n\r\n@inject(DataAPI, Router, DialogService)\r\nexport class LookupDetail {\r\n  constructor(api, router, dialogService) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.dialogService = dialogService;\r\n\r\n    this.completeDomainLookups = [];\r\n    this.incompleteDomainLookups = [];\r\n    this.registerDomainLookup = this.registerDomainLookup.bind(this);\r\n  }\r\n\r\n  activate(params) {\r\n    const { lookupId } = params;\r\n    this.isLoading = true;\r\n    blockPage();\r\n    this.api.fetchLookup(lookupId)\r\n      .then(lookupData => {\r\n        releasePage();\r\n        this.isLoading = false;\r\n        this.registerLookup(lookupData);\r\n      })\r\n      .catch((err) => {\r\n        releasePage();\r\n        this.isLoading = false;\r\n        this.router.navigateToRoute('not-found');\r\n      });\r\n  }\r\n\r\n  get hasIncompleteLookups() {\r\n    return this.incompleteDomainLookups.length > 0;\r\n  }\r\n\r\n  get hasCompleteLookups() {\r\n    return this.completeDomainLookups.length > 0;\r\n  }\r\n\r\n  registerLookup(lookupData) {\r\n    this.lookupData = lookupData;\r\n    lookupData.domainLookups.forEach(this.registerDomainLookup);\r\n  }\r\n\r\n  registerDomainLookup(domainLookup) {\r\n    const { id, domainLookupState } = domainLookup;\r\n    let currStateName = domainLookupState.name;\r\n\r\n    if (isCompleteState(currStateName)) {\r\n      this.registerCompleteDomainLookup(id);\r\n      return;\r\n    }\r\n\r\n    this.incompleteDomainLookups.push(flattenDomainLookup((domainLookup)));\r\n\r\n    const eventSource = this.api.getDomainLookupEventSource(id);\r\n    eventSource.onerror = (error) => {\r\n      // prevent error spam\r\n      if (!this.eventSourceErrorOccurred) {\r\n        this.eventSourceErrorOccurred = true;\r\n        this.openErrorDialog('A network error has occurred. You might want to refresh the page.');\r\n      }\r\n    };\r\n\r\n    eventSource.addEventListener('state', (event) => {\r\n      currStateName = event.data;\r\n      if (isCompleteState(currStateName)) {\r\n        eventSource.close();\r\n        this.registerCompleteDomainLookup(id);\r\n      } else {\r\n        this.incompleteDomainLookups.find(d => d.id === id)\r\n          .currStateName = currStateName;\r\n      }\r\n    });\r\n  }\r\n\r\n  registerCompleteDomainLookup(id) {\r\n    this.incompleteDomainLookups = this.incompleteDomainLookups\r\n      .filter(d => d.id !== id);\r\n    this.api.fetchDomainLookup(id)\r\n      .then(cpltDomainLookup => {\r\n        this.completeDomainLookups.push(\r\n          extendCompleteDomainLookup(flattenDomainLookup(cpltDomainLookup))\r\n        );\r\n      });\r\n  }\r\n\r\n  openErrorDialog(message) {\r\n    this.dialogService.open({\r\n      viewModel: ErrorDialog,\r\n      model: { message }\r\n    });\r\n  }\r\n}\r\n\r\nconst isCompleteState = (stateName) => (\r\n  stateName === STATE_COMPLETE || stateName === STATE_ERROR\r\n);\r\n\r\nconst extendCompleteDomainLookup = (domainLookup) => {\r\n  const chartDataItems = [\r\n    {\r\n      data: domainLookup.positiveCount,\r\n      label: 'Positive',\r\n      color: 'green'\r\n    },\r\n    {\r\n      data: domainLookup.neutralCount,\r\n      label: 'Neutral',\r\n      color: 'yellow'\r\n    },\r\n    {\r\n      data: domainLookup.negativeCount,\r\n      label: 'Negative',\r\n      color: 'red'\r\n    }\r\n  ];\r\n  const totalCount = domainLookup.neutralCount\r\n    + domainLookup.negativeCount\r\n    + domainLookup.positiveCount;\r\n\r\n  return Object.assign(domainLookup, { chartDataItems, totalCount });\r\n};\r\n\r\nconst flattenDomainLookup = (domainLookup) => {\r\n  const currStateName = domainLookup.domainLookupState.name;\r\n  const domainName = domainLookup.domain.name;\r\n  const isError = currStateName === STATE_ERROR;\r\n  const isSuccess = currStateName === STATE_COMPLETE;\r\n\r\n  return Object.assign({}, domainLookup, {\r\n    isError,\r\n    isSuccess,\r\n    domainName,\r\n    currStateName\r\n  });\r\n};\r\n\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\n\r\n@inject(Router)\r\nexport default class MainPage {\r\n  constructor(router) {\r\n    this.router = router;\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogService } from 'aurelia-dialog';\r\n\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\nimport { isEmpty } from '../../lib/utils';\r\nimport { blockPage, releasePage } from '../../app-utils';\r\nimport LookupSubmitted from './dialogs/lookup-submitted';\r\nimport ErrorDialog from '../dialogs/error-dialog';\r\n\r\nconst MSG_NETWORK_ERR = 'An error occurred while preparing the form. Check your network connection.';\r\nconst MSG_SUBMISSION_ERR = 'An unexpected error occurred while submitting your lookup.';\r\n\r\n@inject(DataAPI, Router, DialogService)\r\nexport class LookupForm {\r\n  constructor(api, router, dialogService) {\r\n    this.api = api;\r\n    this.router = router;\r\n    this.dialogService = dialogService;\r\n\r\n    this.entityName = '';\r\n    this.domainIds = [];\r\n  }\r\n\r\n  attached() {\r\n    blockPage();\r\n    this.api.fetchDomains()\r\n      .then((domains) => {\r\n        releasePage();\r\n        this.domainOptions = domains.map(d => ({\r\n          label: d.name,\r\n          value: d.code\r\n        }));\r\n      })\r\n      .catch((err) => {\r\n        releasePage();\r\n        this.openErrorDialog(MSG_NETWORK_ERR);\r\n      });\r\n  }\r\n\r\n  get canLookup() {\r\n    return !isEmpty(this.entityName)\r\n      && this.domainIds.length > 0;\r\n  }\r\n\r\n  performLookup() {\r\n    blockPage();\r\n    const { entityName, domainIds } = this;\r\n\r\n    this.api.postLookup({ entityName, domainIds })\r\n      .then(lookupResult => {\r\n        releasePage();\r\n        this.domainIds = [];\r\n        this.entityName = '';\r\n        this.openResultDialog({ lookupResult, entityName });\r\n      })\r\n      .catch(err => {\r\n        releasePage();\r\n        this.openErrorDialog(MSG_SUBMISSION_ERR);\r\n      });\r\n  }\r\n\r\n  openResultDialog(model) {\r\n    this.dialogService.open({\r\n      viewModel: LookupSubmitted,\r\n      model: model\r\n    });\r\n  }\r\n\r\n  openErrorDialog(message) {\r\n    this.dialogService.open({\r\n      viewModel: ErrorDialog,\r\n      model: { message }\r\n    });\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport environment from '../../environment';\r\n\r\n@inject(HttpClient)\r\nexport class DataAPI {\r\n\r\n  constructor(httpClient) {\r\n    this.httpClient = httpClient.configure(config => config\r\n          .useStandardConfiguration()\r\n          .withBaseUrl(environment.gatewayURL)\r\n        );\r\n  }\r\n\r\n  isRequesting() {\r\n    return this.httpClient.isRequesting;\r\n  }\r\n\r\n  fetchLookup(lookupId) {\r\n    return this.httpClient\r\n      .fetch(`/lookups/${lookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  postLookup(lookupData) {\r\n    return this.httpClient\r\n    .fetch('/lookups', {\r\n      method: 'POST',\r\n      body: JSON.stringify(lookupData),\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }})\r\n    .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomains() {\r\n    return this.httpClient\r\n      .fetch('/domains')\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  fetchDomainLookup(domainLookupId) {\r\n    return this.httpClient\r\n      .fetch(`/domain-lookups/${domainLookupId}`)\r\n      .then(response => (response.json()));\r\n  }\r\n\r\n  getDomainLookupEventSource(domainLookupId) {\r\n    return new EventSource(\r\n      `${environment.gatewayURL}/domain-lookups/${domainLookupId}/updates`);\r\n  }\r\n}\r\n","export class FilterByValueConverter {\r\n  toView(array, value, ...properties) {\r\n    value = (value || '').trim().toLowerCase();\r\n    if (!value) {\r\n      return array;\r\n    }\r\n    return array.filter(item =>\r\n      properties.some(property =>\r\n        (item[property] || '').toLowerCase().includes(value)));\r\n  }\r\n}\r\n","export class OrderByValueConverter {\r\n  toView(array, property, direction = 'asc') {\r\n    array = array.slice(0);\r\n    const directionFactor = direction === 'desc' ? -1 : 1;\r\n    array.sort((item1, item2) => {\r\n      const value1 = item1[property];\r\n      const value2 = item2[property];\r\n      if (value1 > value2) {\r\n        return directionFactor;\r\n      } else if (value1 < value2) {\r\n        return -directionFactor;\r\n      }\r\n      return 0;\r\n    });\r\n    return array;\r\n  }\r\n}\r\n","export default class NotFound {}\r\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController, Router)\r\nexport default class LookupSubmitted {\r\n  lookupResult = {};\r\n\r\n  constructor(controller, router) {\r\n    this.controller = controller;\r\n    this.router = router;\r\n  }\r\n\r\n  activate({ lookupResult, entityName }) {\r\n    this.lookupResult = lookupResult;\r\n    this.entityName = entityName;\r\n  }\r\n\r\n  openDetailPage() {\r\n    this.router.navigate(`lookups/${this.lookupResult.lookupId}`);\r\n  }\r\n\r\n  close() {\r\n    this.controller.cancel();\r\n  }\r\n}\r\n","import { inject, bindable } from 'aurelia-framework';\r\n\r\nimport Chart from 'chart.js';\r\n\r\nimport { colorMap } from './utils/colors';\r\n\r\n@inject(Element)\r\nexport class PieChart {\r\n  @bindable width = '250';\r\n  @bindable height = '250';\r\n  @bindable items = [];\r\n\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n\r\n  attached() {\r\n    const data = this.mapDataItemsToChartData(this.items);\r\n    const type = 'pie';\r\n\r\n    this.canvas = this.element.querySelector('.chart-canvas');\r\n    this.chart = new Chart(this.canvas, { type, data });\r\n  }\r\n\r\n  mapDataItemsToChartData(dataItems) {\r\n    const labels = dataItems.map(item => item.label);\r\n    const data = dataItems.map(item => item.data);\r\n    const backgroundColor = dataItems.map(item => colorMap[item.color].backgroundColor);\r\n    const hoverBackgroundColor = dataItems.map(item => colorMap[item.color].hoverBackgroundColor);\r\n\r\n    return {\r\n      labels,\r\n      datasets: [{\r\n        data,\r\n        backgroundColor,\r\n        hoverBackgroundColor\r\n      }]\r\n    };\r\n  }\r\n}\r\n","export const colorMap = {\r\n  'red': {\r\n    hoverBackgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n    backgroundColor: 'rgba(255,99,132,1)'\r\n  },\r\n  'blue': {\r\n    hoverBackgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n    backgroundColor: 'rgba(54, 162, 235, 1)'\r\n  },\r\n  'yellow': {\r\n    hoverBackgroundColor: 'rgba(255, 206, 86, 0.2)',\r\n    backgroundColor: 'rgba(255, 206, 86, 1)'\r\n  },\r\n  'green': {\r\n    hoverBackgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n    backgroundColor: 'rgba(75, 192, 192, 1)'\r\n  }\r\n};\r\n"],"sourceRoot":"../src"}