{"version":3,"sources":["app.js","environment.js","lookup-form.js","lookup-result.js","main.js","messages.js","no-lookup.js","utils.js","web-api.js","resources/index.js","resources/elements/enhanced-select.js","resources/elements/loading-indicator.js"],"names":["App","api","configureRouter","config","router","title","map","route","moduleId","name","debug","testing","gatewayURL","LookupForm","ea","entityName","created","performLookup","publish","blockPage","domainIds","then","releasePage","navigate","lookupResult","id","$","blockUI","message","unblockUI","LookupResult","inject","subscribe","activate","params","getLookupData","lookupId","lookupData","JSON","stringify","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","LookupStarted","NoLookup","isEmpty","val","trim","WebAPI","httpClient","useStandardConfiguration","withBaseUrl","isRequesting","fetch","response","json","method","body","headers","globalResources","EnhancedSelect","Element","defaultBindingMode","oneWay","twoWay","element","attached","selector","find","select2","on","event","value","detached","nprogress","LoadingIndicator","defaultValue","loadingChanged","newValue","done"],"mappings":"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","file":"app-bundle.js","sourcesContent":["/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n * \r\n * 07/03/2017\tIDKPR-44: use injection\r\n */\r\nimport {inject} from 'aurelia-framework';\r\nimport {WebAPI} from './web-api';\r\n\r\n@inject(WebAPI)\r\nexport class App {\r\n\r\n\tconstructor(api) {\r\n\t\tthis.api = api;\r\n\t}\r\n\r\n\tconfigureRouter(config, router) {\r\n\t\tconfig.title = 'Sentimental.ly';\r\n\t\tconfig.map([\r\n\t\t\t{\r\n\t\t\t\troute: '',\r\n\t\t\t\tmoduleId: 'no-lookup', \r\n\t\t\t\ttitle: 'Lookups'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\troute: 'lookups/:lookupId',\r\n\t\t\t\tmoduleId: 'lookup-result',\r\n\t\t\t\tname: 'lookups'\r\n\t\t\t}\r\n\t\t]);\r\n\r\n\t\tthis.router = router;\r\n\t}\r\n}\r\n","export default {\r\n\tdebug: true,\r\n\ttesting: true,\r\n\tgatewayURL: 'http://localhost:8080/'\r\n};\r\n","/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n */\r\nimport {inject} from 'aurelia-framework';\r\nimport {WebAPI} from './web-api';\r\nimport {isEmpty} from './utils';\r\nimport {Router} from 'aurelia-router';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {LookupStarted} from './messages';\r\nimport 'jquery';\r\nimport blockUI from 'blockUI';\r\n\r\n@inject(WebAPI, Router, EventAggregator)\r\nexport class LookupForm {\r\n\tconstructor(api, router, ea) {\r\n\t\tthis.api = api;\r\n\t\tthis.router = router;\r\n\t\tthis.ea = ea;\r\n\r\n\t\tthis.entityName = '';\r\n\t}\r\n\r\n\tcreated() {\r\n\r\n\t}\r\n\r\n\tget canLookup() {\r\n\t\treturn !isEmpty(this.entityName)\r\n\t}\r\n\r\n\tperformLookup() {\r\n\t\tthis.ea.publish(new LookupStarted());\r\n\t\tblockPage();\r\n\t\t\r\n\t\tthis.api.performLookup({\r\n\t\t\tentityName: this.entityName,\r\n\t\t\tdomainIds: []\r\n\t\t})\r\n\t\t.then(lookupResult => {\r\n\t\t\treleasePage();\r\n\t\t\tthis.router.navigate(\"lookups/\" + lookupResult.id);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction blockPage() {\r\n\t$.blockUI({ message: null });\r\n}\r\n\r\nfunction releasePage() {\r\n\t$.unblockUI();\r\n}","/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n */\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {LookupStarted} from './messages';\r\nimport {WebAPI} from './web-api';\r\n\r\nexport class LookupResult {\r\n  static inject() { return [WebAPI, EventAggregator]; }\r\n\r\n  constructor(api, ea){\r\n    this.api = api;\r\n    this.ea = ea;\r\n    this.ea.subscribe(LookupStarted, msg =>  {\r\n      // clear old results here\r\n    });\r\n  }\r\n\r\n  activate(params) {\r\n    this.api.getLookupData(params.lookupId).then(lookupData => {\r\n      this.lookupData = JSON.stringify(lookupData, null, ' ');\r\n    });\r\n  }\r\n}\r\n","import environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n\twarnings: {\r\n\t\twForgottenReturn: false\r\n\t}\r\n});\r\n\r\nexport function configure(aurelia) {\r\n\taurelia.use\r\n\t\t.standardConfiguration()\r\n\t\t.feature('resources');\r\n\r\n\tif (environment.debug) {\r\n\t\taurelia.use.developmentLogging();\r\n\t}\r\n\r\n\tif (environment.testing) {\r\n\t\taurelia.use.plugin('aurelia-testing');\r\n\t}\r\n\r\n\taurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n */\r\nexport class LookupStarted {\r\n\tconstructor(){\r\n\t\t// pass\r\n\t}\r\n}","/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n */\r\nexport class NoLookup {\r\n\tconstructor() {\r\n\t\tthis.message = \"Use the form to see what other people think.\";\r\n\t}\r\n}\r\n","/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n */\r\nexport function isEmpty(val) {\r\n\treturn !val || !val.trim();\r\n}\r\n","/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n * \r\n * 07/03/2017\tIDKPR-44: use injection\r\n */\r\nimport {inject} from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\nimport environment from './environment';\r\n\r\n@inject(HttpClient)\r\nexport class WebAPI {\r\n\tconstructor(httpClient) {\r\n\t\tthis.httpClient = httpClient.configure(config => config\r\n\t\t\t\t\t.useStandardConfiguration()\r\n\t\t\t\t\t.withBaseUrl(environment.gatewayURL)\r\n\t\t\t\t);\r\n\t}\r\n\r\n\tisRequesting() {\r\n\t\treturn this.httpClient.isRequesting;\r\n\t}\r\n\r\n\tgetLookupData(lookupId) {\r\n\t\treturn this.httpClient\r\n\t\t\t.fetch('lookups/' + lookupId)\r\n\t\t\t.then(response => { return response.json() });\r\n\t}\r\n\r\n\tperformLookup(lookupData) {\r\n\t\treturn this.httpClient\r\n\t\t.fetch('lookups', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: JSON.stringify(lookupData),\r\n\t\t\theaders: {\r\n\t\t\t'Content-type': 'application/json'\r\n\t\t\t}})\r\n\t\t.then(response => { return response.json() });\r\n\t}\r\n}\r\n","export function configure(config) {\r\n\tconfig.globalResources([\r\n\t\t'./elements/loading-indicator',\r\n\t\t'./elements/enhanced-select'\r\n\t]);\r\n}\r\n","import {bindable, bindingMode, inject} from 'aurelia-framework';\r\n\r\nimport 'jquery';\r\nimport select2 from 'select2';\r\n\r\n@inject(Element)\r\nexport class EnhancedSelect {\r\n\t@bindable({ defaultBindingMode: bindingMode.oneWay }) guid = '';\r\n\t@bindable({ defaultBindingMode: bindingMode.oneWay }) values;\r\n\t@bindable({ defaultBindingMode: bindingMode.twoWay }) value;\r\n\r\n\tconstructor(element) {\r\n\t\tthis.element = element;\r\n\t}\r\n\r\n\tattached() {\r\n\t\tthis.selector = $(this.element).find('select')\r\n\t\t\t.select2()\r\n\t\t\t.on('select2:select', (event) => {\r\n\t\t\t\tthis.value = $(this.element).find('select').select2('val');\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tdetached() {\r\n\t\tthis.selector.select2('destroy');\r\n\t}\r\n}","/**\r\n * Created by Tanel.Prikk on 2/21/2017.\r\n */\r\nimport * as nprogress from 'nprogress';\r\nimport {bindable, noView, decorators} from 'aurelia-framework';\r\n\r\nexport let LoadingIndicator = decorators(\r\n\tnoView(['nprogress/nprogress.css']),\r\n\tbindable({name: 'loading', defaultValue: false})\r\n).on(class {\r\n\tloadingChanged(newValue){\r\n\t\tif (newValue) {\r\n\t\t\tnprogress.start();\r\n\t\t} else {\r\n\t\t\tnprogress.done();\r\n\t\t}\r\n\t}\r\n});\r\n"],"sourceRoot":"../src"}